<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="brandtoolkit.css">
    <link rel="stylesheet" href="main-styles.css">
    <link rel="stylesheet" href="test.css">
    <title>test</title>
</head>
<style>
    button {
    background-color: var(--white);
    border: 1px solid var(--black);
    font-size: 1em;
    line-height: 1.2em;
    transition: background-color 0.3s, color 0.3s, border-color 0.3s;
}

/* Hover state */
button:hover, #all-work.active, #favourite.active {
    color: var(--white);
    background-color: var(--black);
}


/* Specific filter colors */
#UX:hover, #UX.active {
    background-color: var(--red);
    border-color: var(--red);
    color: var(--black);
}

#UI:hover, #UI.active {
    background-color: var(--pink);
    border-color: var(--pink);
    color: var(--black);
}

#service-design:hover, #service-design.active {
    background-color: var(--green);
    border-color: var(--green);
    color: var(--black);
}

#creative-coding:hover, #creative-coding.active {
    background-color: var(--blue-light);
    border-color: var(--blue-light);
    color: var(--black);
}

#branding:hover, #branding.active {
    background-color: var(--yellow-buttermilk);
    border-color: var(--yellow-buttermilk);
    color: var(--black);
}
</style>
<body>
    <section id="work-archive">
        <h2>work archive</h2>
        <p>Generally, the best ux design leaves no strain nor impression on the user — it's about creating a seamless user experience. However, I also believe that great UX design can truly captivate the user; creating something intuitive and visually compelling is often what makes people want to use (and keep using) a product. </p> 
        <p>With my background in UX and graphic design, I love to to blend conceptual and creative elements with practical and accessible design frameworks. This balance allows me to craft projects where functionality meets excitement—delivering intuitive and visually engaging experiences that feel both fresh and familiar.</p> 
        <p>Have a look at what i've done in 
            <button id="UX">UX design</button>
            <button id="UI">UI design</button>
            <button id="service-design">Service Design</button>
            <button id="branding">Branding</button>
            <button id="creative-coding">(Creative) Coding</button>
            or have a look at <button id="all-work">it all</button> or see <button id="favourite">my favourites</button> .
        </p>
        <div class="filter-sort"></div> <!-- NEED TO ADD IN FILTER SORT THINGO -- MAYBE DO THE SORT IN THE TH (LIKE ON DELPHI) -->
        <table id="archive-table">
            <thead>
                <tr>
                    <th id="proj-date">Date</th>
                    <th id="proj-title">Project</th>
                    <th id="proj-desc">About</th>
                    <th id="proj-tags">Skillsets</th>
                </tr>
            </thead>
            <tbody>
                <!-- Rows will be dynamically added here -->
            </tbody>
        </table>
        <div id="pagination">
            <button id="prev">←</button>
            <span id="page-numbers"></span>
            <button id="next">→</button>
        </div>
    </section> 



<script>
document.addEventListener('DOMContentLoaded', () => {
    const rowsPerPage = 4;
    let currentPage = 1;
    const tableBody = document.querySelector('#archive-table tbody');
    const pageNumbers = document.querySelector('#page-numbers');
    const prevButton = document.querySelector('#prev');
    const nextButton = document.querySelector('#next');
    const filterButtons = document.querySelectorAll('#work-archive button');
    const allWorkButton = document.querySelector('#all-work'); // Select the #all-work button
    let data = [];
    let filteredData = [];
    let activeFilters = new Set();


    // Fetch CSV data
    function fetchData() {
        Papa.parse('work-archive.csv', {
            download: true,
            header: true,
            complete: function (results) {
                data = results.data.map(row => {
                    // Ensure the 'filter' field exists and append 'all' if not already present
                    if (!row.filter) {
                        row.filter = "all";
                    } else if (!row.filter.toLowerCase().includes('all')) {
                        row.filter += ";all"; // Append 'all' if it's not there
                    }
                    return row;
                });

                filteredData = [...data]; // Initialize with all data
                renderTable(currentPage);
            }
        });
    }

    function renderTable(page) {
        tableBody.innerHTML = '';
        const start = (page - 1) * rowsPerPage;
        const end = start + rowsPerPage;
        const paginatedData = filteredData.slice(start, end); // Use filteredData

        paginatedData.forEach(row => {
            const tr = document.createElement('tr');
            const skillset = row.skillset.split(';').map(skill => skill.trim()).join(', ');
            tr.innerHTML = `
                <td>${row['end-date']}</td>
                <td class="proj-title">
                    ${row.title}
                    <img src="${row['hero-img']}" class="hero-img" alt="${row.title}">
                </td>
                <td>${row.description}</td>
                <td>${skillset}</td>
            `;
            tableBody.appendChild(tr);
        });

        renderPagination();
    }

    // Render pagination
    function renderPagination() {
        pageNumbers.innerHTML = '';
        const totalPages = Math.ceil(filteredData.length / rowsPerPage);

        for (let i = 1; i <= totalPages; i++) {
            const span = document.createElement('span');
            span.textContent = i;
            span.classList.add('page-number');
            if (i === currentPage) {
                span.classList.add('active');
            }
            span.addEventListener('click', () => {
                currentPage = i;
                renderTable(currentPage);
            });
            pageNumbers.appendChild(span);
        }

        prevButton.disabled = currentPage === 1;
        nextButton.disabled = currentPage === totalPages;
    }

    // Filter data based on the button clicked
    function applyFilters() {
        if (activeFilters.size === 0) {
            filteredData = [...data]; // Show all rows
        } else {
            filteredData = data.filter(row =>
                Array.from(activeFilters).some(filter =>
                    row.filter && row.filter.toLowerCase().includes(filter)
                )
            );
        }

        currentPage = 1;
        renderTable(currentPage);
    }

    filterButtons.forEach(button => {
        button.addEventListener('click', () => {
            const filter = button.id.toLowerCase();

            // If #all-work is clicked, reset filters and show all rows
            if (filter === 'all-work') {
                activeFilters.clear();
                filterButtons.forEach(btn => btn.classList.remove('active'));
                allWorkButton.classList.add('active'); // Keep #all-work active
                filteredData = [...data]; // Show all rows
            } else {
                allWorkButton.classList.remove('active'); // Clicking another filter removes .active from #all-work

                // Toggle active filter
                if (activeFilters.has(filter)) {
                    activeFilters.delete(filter);
                    button.classList.remove('active');
                } else {
                    activeFilters.add(filter);
                    button.classList.add('active');
                }
            }

            applyFilters();
        });
    });

    // Pagination buttons
    prevButton.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderTable(currentPage);
        }
    });

    nextButton.addEventListener('click', () => {
        const totalPages = Math.ceil(filteredData.length / rowsPerPage);
        if (currentPage < totalPages) {
            currentPage++;
            renderTable(currentPage);
        }
    });

    fetchData();
});
</script>  
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>

</body>
</html>